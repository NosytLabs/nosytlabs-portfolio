---
// Admin Panel Main Page
import BaseLayout from '../../layouts/BaseLayout.astro';
import AdminSidebar from '../../components/admin/AdminSidebar.astro';
import AdminHeader from '../../components/admin/AdminHeader.astro';
import AdminDashboard from '../../components/admin/AdminDashboard.astro';

// Check if user is authenticated (this will be replaced with actual auth logic)
const isAuthenticated = true; // Placeholder for authentication check
---

{isAuthenticated ? (
  <BaseLayout 
    title="Admin Panel - NosytLabs" 
    description="NosytLabs Admin Panel for managing content"
  >
    <div class="admin-container">
      <AdminSidebar />
      <div class="admin-content">
        <AdminHeader title="Dashboard" />
        <AdminDashboard />
      </div>
    </div>
  </BaseLayout>
) : (
  <BaseLayout 
    title="Admin Login - NosytLabs" 
    description="NosytLabs Admin Login"
  >
    <div class="login-container">
      <div class="login-form">
        <h1>Admin Login</h1>
        <form id="login-form" method="post">
          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" id="username" name="username" required>
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="password" name="password" required>
          </div>
          <button type="submit" class="btn-primary">Login</button>
        </form>
      </div>
    </div>
  </BaseLayout>
)}

<style>
  .admin-container {
    display: flex;
    min-height: calc(100vh - 64px);
  }

  .admin-content {
    flex: 1;
    padding: 1rem;
    background-color: var(--color-bg-secondary);
  }

  .login-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: calc(100vh - 64px);
    background-color: var(--color-bg-secondary);
  }

  .login-form {
    background-color: var(--color-bg-primary);
    padding: 2rem;
    border-radius: 0.5rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    width: 100%;
    max-width: 400px;
  }

  .login-form h1 {
    margin-bottom: 1.5rem;
    color: var(--nosyt-purple-main);
    text-align: center;
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 500;
  }

  .form-group input {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--color-border);
    border-radius: 0.25rem;
    background-color: var(--color-bg-primary);
    color: var(--color-text-primary);
  }

  .btn-primary {
    display: block;
    width: 100%;
    padding: 0.75rem;
    background-color: var(--nosyt-purple-main);
    color: white;
    border: none;
    border-radius: 0.25rem;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .btn-primary:hover {
    background-color: var(--nosyt-purple-dark);
  }

  /* Dark mode styles */
  .dark .login-form {
    background-color: var(--color-bg-primary);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  }

  .dark .form-group input {
    background-color: var(--color-bg-secondary);
    border-color: var(--color-border);
  }
</style>

<script>
  // Client-side authentication logic
  document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.getElementById('login-form');
    
    if (loginForm) {
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        
        // Simple authentication (replace with actual auth logic)
        if (username === 'admin' && password === 'nosytlabs2025') {
          // Set authentication cookie/localStorage
          localStorage.setItem('admin-auth', 'true');
          
          // Redirect to admin dashboard
          window.location.href = '/admin';
        } else {
          alert('Invalid username or password');
        }
      });
    }
  });
</script>
